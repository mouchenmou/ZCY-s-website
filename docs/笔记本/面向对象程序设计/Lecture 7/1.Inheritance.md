![](é™„ä»¶/Pasted%20image%2020251108154442.png)
![](é™„ä»¶/Pasted%20image%2020251108154520.png)

1. æ ¸å¿ƒçˆ¶ç±»ï¼š`Item`
    - `class Item{...}`ï¼šè¿™æ˜¯ä¸€ä¸ªæ–°çš„ã€é€šç”¨çš„`Item`ç±»
        - å®ƒä½äºé¡¶å±‚ï¼Œæ˜¯æ‰€æœ‰åª’ä½“æ”¶è—æ¡ç›®çš„åŸºç±»
        - å®ƒåº”è¯¥åŒ…å«`CD`å’Œ`DVD`ç±»çš„æ‰€æœ‰å…±åŒå±æ€§å’Œæ–¹æ³•ï¼ˆä¾‹å¦‚`title`,`playingTime`ç­‰ç­‰ï¼‰
2. ç»§æ‰¿å…³ç³»
    - `class CD : public Item`ï¼š
        - è¡¨ç¤º`CD`ç±»å…¬å¼€ç»§æ‰¿è‡ª`Item`ç±»
        - åœ¨ c++/c ä¸­ï¼Œ`:`åé¢è·Ÿçˆ¶åè¡¨ç¤ºç»§æ‰¿
        - ç»§æ‰¿ä½œç”¨ï¼š`CD`ç±»ç°åœ¨è‡ªåŠ¨æ‹¥æœ‰äº†`Item`ç±»ä¸­çš„é€šç”¨åŠŸèƒ½
    - `class DVD : public Item {...}:`
        - è¡¨ç¤º`DVD`ç±»ä¹Ÿå…¬å¼€ç»§æ‰¿è‡ª`Item`ç±» 
        - ç»§æ‰¿ä½œç”¨ï¼š`DVD`ç±»ä¹Ÿè‡ªåŠ¨æ‹¥æœ‰äº†`Item`ç±»ä¸­çš„é€šç”¨åŠŸèƒ½
3. ä»£ç ä¿®æ”¹çš„æç¤º
    - å›¾ä¸­çš„æ³¨é‡ŠæŒ‡å‡ºäº†å¼•å…¥ç»§æ‰¿åçš„ä»£ç ä¿®æ”¹ç­–ç•¥
        - `Item`ç±»ä¸€æ—¦å®šä¹‰å¥½ï¼Œå°±åŒ…å«äº†æ‰€æœ‰é€šç”¨çš„ä»£ç ï¼Œä¸éœ€è¦å†ä¿®æ”¹ï¼Œå®ƒä½œä¸ºåŸºç¡€ç»“æ„å­˜åœ¨
        - `CD`å’Œ`DVD`ç±»ç°åœ¨åªéœ€è¦åŒ…å«å®ƒä»¬è‡ªå·±ç‹¬æœ‰çš„ã€ä¸çˆ¶ç±»ä¸åŒçš„éƒ¨åˆ†
            - ä¾‹å¦‚ï¼š`CD`ç±»åªéœ€è¦æ·»åŠ `artist`å’Œ`numberOfTracks`å±æ€§
            - ä¾‹å¦‚ï¼š`DVD`ç±»åªéœ€è¦æ·»åŠ `director`å±æ€§

---

## Database v2.0
é€šè¿‡ç»§æ‰¿æ”¹è¿›ä¹‹åï¼Œè¿™æ®µä»£ç æ¯”ä¸ŠèŠ‚è¯¾çš„source codeå°±æ–¹ä¾¿äº†å¾ˆå¤šï¼ˆä¹Ÿæ˜¯javaï¼‰
```java
    public void addItem (Item theItem){
        item.add(theitem);
    }
    
    public void list(){
        for (Item item :items){
            item.print();
            System.out,println();
        }
    }
```

---

## Adding other item types

![](é™„ä»¶/Pasted%20image%2020251108164351.png)

- åœ¨åŸæœ‰çš„`CD`å’Œ`DVD`å­ç±»æ—è¾¹ï¼Œæ–°å¢äº†ä¸€ä¸ª`VideoGame`ç±»
- ç»§æ‰¿å…³ç³»ï¼š`VideoGame`ä¹Ÿç»§æ‰¿è‡ª`Item`ç±»
- ç‹¬æœ‰å±æ€§ï¼š`VideoGame`ç±»åªéœ€è¦å®šä¹‰å®ƒè‡ªå·±çš„ç‹¬ç‰¹å±æ€§
    - `numberOfPlayers`
    - `platform`
- åŒæ ·åŒ…å«ä¸€ä¸ªæ˜Ÿå·(*)ï¼Œè¡¨ç¤ºå®ƒä¹Ÿå¯èƒ½é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼ˆä¾‹å¦‚å®ƒä¼šé‡å†™`print()`æ–¹æ³•æ¥è¾“å‡ºå®ƒçš„ç‹¬æœ‰ä¿¡æ¯ï¼‰

---

## Deeper hierarchies
![](é™„ä»¶/Pasted%20image%2020251108165443.png)

---

## Advantages of inheritance

1. Avoiding code duplicationï¼ˆé¿å…ä»£ç é‡å¤ï¼‰
    - å°†é€šç”¨å±æ€§å’Œæ–¹æ³•å®šä¹‰åœ¨çˆ¶ç±»`Item`ä¸­ï¼Œå­ç±»å°±ä¸ç”¨é‡å¤ç¼–å†™è¿™äº›ä»£ç ï¼ˆå¦‚`title`, `comment`ï¼‰
2. Code reuseï¼ˆä»£ç é‡ç”¨ï¼‰
    - å­ç±»ç›´æ¥ç»§æ‰¿å¹¶ä½¿ç”¨çˆ¶ç±»ä¸­å·²æœ‰çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ`CD`å’Œ`DVD`éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨`Item`ä¸­çš„`setComment()`æ–¹æ³•ã€‚
3. Easier maintenanceï¼ˆæ›´æ˜“äºç»´æŠ¤ï¼‰
    - å¦‚æœéœ€è¦ä¿®æ”¹é€šç”¨åŠŸèƒ½ï¼Œåªéœ€åœ¨çˆ¶ç±»ä¸­ä¿®æ”¹ä¸€æ¬¡ï¼Œè¿™æ ·æ‰€æœ‰çš„å­ç±»éƒ½ä¼šæ›´æ–°ï¼Œé¿å…äº†åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ä¿®æ”¹ç›¸åŒä»£ç çš„éº»çƒ¦ã€‚
4. Extendibilityï¼ˆå¯æ‰©å±•æ€§ï¼‰
    - å¯ä»¥åœ¨ä¸ä¿®æ”¹ç°æœ‰æ ¸å¿ƒä»£ç çš„æƒ…å†µä¸‹ï¼Œè½»æ¾æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–æ•°æ®ç±»å‹ã€‚

---

## ğŸ‘¨â€ğŸ’¼ ç»§æ‰¿çš„æ ¸å¿ƒæ¦‚å¿µï¼šis-a å…³ç³»
![](é™„ä»¶/Pasted%20image%2020251108170912.png)
### 1. å…³é”®å®šä¹‰ï¼š`is-a`å…³ç³»
- class relationship: `is-a`ï¼šè¡¨ç¤ºå­ç±»æ˜¯çˆ¶ç±»çš„ä¸€ç§ç‰¹æ®Šç±»å‹
    - åœ¨è¿™å¹…å›¾ä¸­ï¼Œæ„å‘³ç€`Manager`æ˜¯ä¸€ä¸ª`Employee`

### 2. å›¾ç¤ºå…³ç³»
- `Employee`ä½äºä¸Šæ–¹ï¼Œæ˜¯çˆ¶ç±»
- `Manager`ä½äºä¸‹æ–¹ï¼Œæ˜¯å­ç±»
- ç®­å¤´ï¼šä»`Manager`æŒ‡å‘`Employee`è¡¨ç¤ºç»§æ‰¿
    - è¿™æ„å‘³ç€`Manager`ç»§æ‰¿äº†`Employee`çš„æ‰€æœ‰å±æ€§ï¼ˆå¦‚å§“åã€å·¥èµ„ã€å…¥èŒæ—¥æœŸç­‰ç­‰ï¼‰å’Œæ–¹æ³•ã€‚
    - `Manager`ç±»å¯ä»¥æ·»åŠ è‡ªå·±ç‹¬æœ‰çš„å±æ€§å’Œæ–¹æ³•

---
## Example

!!! example "ä¸‹é¢ç»™å‡ºä¸€æ®µç¤ºä¾‹"
    ### Declare an Employee class
    ```c++
        class Employee{
        public:
            Employee(const std::string& name, const std::string& ssn);
            const std::string& get_name() const;
            void print(std::ostream& out) const;
            void print(std::ostream& out, const std::string& msg) const;
        protected:
            std::string m_name;
            std::string m_ssn;
        };
    ```
    !!! explanation "Question 1: ä¸ºä»€ä¹ˆå‡½æ•°è¾“å…¥ä½¿ç”¨`&`å‘¢"
        1. æ•ˆç‡ï¼šä¼ å…¥`std::string`å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨ä¼ å€¼(ä¸å¸¦`&`)ï¼Œc++ä¼šåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å‰¯æœ¬ã€‚è€Œä½¿ç”¨`&`æ„å‘³ç€å‡½æ•°ç›´æ¥æ“ä½œåŸå§‹å¯¹è±¡ï¼Œé¿å…äº†åˆ›å»ºå‰¯æœ¬æ‰€å¸¦æ¥çš„æ—¶é—´å’Œå†…å­˜å¼€é”€ï¼Œè¿™å¯¹äºåƒ`std::string`è¿™æ ·å¯èƒ½åŒ…å«å¤§é‡å­—ç¬¦ä¸²çš„å¤§å¯¹è±¡å°¤å…¶é‡è¦ã€‚
        2. å®‰å…¨æ€§ï¼š
            - `Employee`çš„è¾“å…¥å‚æ•°`const std::string& name`ï¼š`const`ä¸å¼•ç”¨`&`ç»“åˆï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ **â€œæˆ‘åªä¿¡å•Šå¼•ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œè¯·ä¸è¦å…è®¸æˆ‘åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å®ƒâ€**ã€‚è¿™ä¿è¯äº†å‡½æ•°æ˜¯ **åªè¯»** çš„.
            - è¿”å›å€¼`const std::string& get_name() const`ï¼šè¿”å›ä¸€ä¸ª`const`çš„å¼•ç”¨åˆ°`m_name`æˆå‘˜å˜é‡ï¼Œæ—¢ä¿è¯äº†æ•ˆç‡ï¼Œåˆä¿è¯äº†å°è£…æ€§å’Œå®‰å…¨æ€§ï¼ˆå› ä¸º`const`å¼•ç”¨ï¼Œå¤–éƒ¨ä¸èƒ½é€šè¿‡è¿™ä¸ªå¼•ç”¨æ¥ä¿®æ”¹`Employee`å¯¹è±¡çš„ç§æœ‰æˆå‘˜`m_name`ï¼‰
    
    !!! explanation "Question 2: `const std::string& get_name() const;`è¿™å¥è¯ä¸ºä»€ä¹ˆè¦ç”¨ä¸¤ä¸ª`const`"
         é¦–å…ˆï¼Œget_name()è¿™ä¸ªå‡½æ•°çš„å‰é¢æœ‰ä¸€ä¸ª`&`ä¿®é¥°ç¬¦ï¼Œå› æ­¤è¿™ä¸ªå‡½æ•°è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ã€‚
         
         1. ç¬¬ä¸€ä¸ª`const`:
             - ä½œç”¨å¯¹è±¡ï¼šå‡½æ•°è¿”å›çš„å¼•ç”¨
             - å«ä¹‰ï¼šå®ƒä¿è¯äº†å‡½æ•°è¿”å›ç»™è°ƒç”¨è€…çš„`std::string&`æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼ˆåªè¯»ï¼‰
             - æ•ˆæœï¼šè¿™æ„å‘³ç€å½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œä½ ä¸èƒ½é€šè¿‡è¿”å›å€¼æ¥ä¿®æ”¹åŸå§‹çš„`Employee`å¯¹è±¡å†…éƒ¨å­˜å‚¨çš„å§“åã€‚
                 - é”™è¯¯ç¤ºä¾‹:`employee.get_name() = "New name"`
         2. ç¬¬äºŒä¸ª`const`:é™å®šå‡½æ•°æœ¬èº«
             - ä½œç”¨å¯¹è±¡ï¼šå‡½æ•°æ‰€å±çš„`Employee`å¯¹è±¡ï¼ˆå³thisæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼‰
             - å«ä¹‰ï¼šå®ƒä¿è¯äº†è¿™ä¸ªæˆå‘˜å‡½æ•°æ˜¯ä¸€ä¸ª **å¸¸é‡æˆå‘˜å‡½æ•°**(`const`ç±»å‹çš„æˆå‘˜å‡½æ•°)ã€‚
             - æ•ˆæœï¼šå‡½æ•°å†…éƒ¨ä¸èƒ½ä¿®æ”¹è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡çš„ä»»ä½•æˆå‘˜å˜é‡ï¼ˆå¦‚`m_name`æˆ–`m_ssn`ï¼‰
    
    ---
    
    ### Constructor for Employee
    ```c++
            Employee::Employee(const string& name, const string& ssn):m_name(name), m_ssn(ssn){}
    ```
    
    ---
    
    ### Employee member functions
    ```c++
        inline const std::string& Employee::get_name() const{
            return m_name;
        }
        inline void Employee::print(std::ostream& out) const{
            out << m_name << endl;
            out << m_ssn << endl;
        }
        inline void Employee::print(std::ostream& out, const std::string& msg) const{
            out << msg << endl;
            print(out);
        }
    ```
    !!! explanation "Question 1: ostreamæ˜¯ä»€ä¹ˆçš„ä¸œè¥¿"
        `ostream`æ˜¯c++æ ‡å‡†åº“ä¸­`I/O`ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºè¾“å‡ºæ“ä½œ
        
        - å«ä¹‰ï¼šå°†ä¸€ç§æ•°æ®ä»ç¨‹åºä¼ è¾“åˆ°å¤–éƒ¨è®¾å¤‡çš„æŠ½è±¡æ¦‚å¿µ
        - åŠŸèƒ½ï¼šå®ƒæä¾›äº†æ‰€æœ‰æµå¯¹è±¡éƒ½æœ‰çš„è¾“å‡ºæ“ä½œ
            - `std::cout`: è¿æ¥åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆé€šå¸¸æ˜¯ç»ˆç«¯/æ§åˆ¶å°ï¼‰
            - `std::cerr`: è¿æ¥åˆ°æ ‡å‡†é”™è¯¯æµ
            - `std::clog`: è¿æ¥åˆ°æ ‡å‡†æ—¥å¿—æµ
            - `std::ofstream`: è¿æ¥åˆ°æ–‡ä»¶
    
    !!! explanation "Question 2: è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ç”¨çš„æ˜¯`out`è€Œé`cout`"
        `out`åªæ˜¯æˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯`ostream`ç±»å‹çš„å¼•ç”¨ï¼Œè·Ÿ`int &a = b;`å®šä¹‰äº†ä¸€ä¸ª`int`ç±»å‹çš„å¼•ç”¨æ˜¯ä¸€ä¸ªé“ç†ã€‚
        ```c++
            å¦‚æœæˆ‘å£°æ˜å‡½æ•°æ—¶æŠŠå‡½æ•°å†™æˆè¿™æ ·ï¼š
            inline void Employee::print(std::ostream& huangjiexi) const;
            
            é‚£ä¹ˆå®šä¹‰å‡½æ•°æ—¶å°±åº”è¯¥å†™æˆï¼š
            inline void Employee::print(std::ostream& huangjiexi) const{
                huangjiexi << m_name << endl;
                huangjiexi << m_ssn << endl;
        }
        ```
        
    !!! explanation "Question 3: ç”¨`ostream`å®šä¹‰çš„è¾“å‡ºæœ€åä¼šè¾“å‡ºåˆ°å“ªé‡Œå‘¢ï¼Ÿ"
        #### ä¹‹å‰å­˜åœ¨çš„ç–‘æƒ‘ï¼šåƒ`cout`å°±æ˜¯èƒ½å¤ŸæŠŠæˆ‘ä»¬è¦è¾“å‡ºçš„å†…å®¹æ‰“å°åˆ°å±å¹•ä¸Šï¼Œé‚£ä¹ˆ`ostream`åˆèƒ½æŠŠæ•°æ®æ‰“å°åˆ°å“ªé‡Œå‘¢ï¼Ÿ
        
        #### è§£ç­”ï¼š`msg`è¢«è¾“å‡ºåˆ°äº†ç¨‹åºå‘˜åœ¨è°ƒç”¨`print`å‡½æ•°æ—¶æŒ‡å®šçš„é‚£ä¸ªè¾“å‡ºç›®æ ‡
        
        1. `out`æœ¬èº«ä¸æ˜¯ä¸€ä¸ªå›ºå®šçš„è¾“å‡ºç›®æ ‡ï¼ˆæ¯”å¦‚å±å¹•ï¼‰
        2. `out`æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒåœ¨ç­‰å¾…è¢«è¿æ¥åˆ°å®é™…çš„è¾“å‡ºé€šé“
        
        !!! tips "ç”¨å‡½æ•°`print(std::ostream& out, std::string& msg)`æ¥ä¸¾å‡ ä¸ªä¾‹å­"
        ä¸Šé¢çš„è§£é‡Šå¯èƒ½æ¯”è¾ƒæ™¦æ¶©éš¾æ‡‚ï¼Œä¸‹é¢çš„å‡ ä¸ªä¾‹å­æ¯”è¾ƒå¥½ç†è§£
        å‡è®¾ä¸€ä¸ª`Employee`å¯¹è±¡å«`alice`
            ```c++
                //æƒ…å†µ1ï¼šè¾“å‡ºåˆ°å±å¹•
                alice.print(std::cout, "é»„æ°æ›¦æ˜¯å¼±æ™º");
                
                //æƒ…å†µ2ï¼šè¾“å‡ºåˆ°é”™è¯¯æ—¥å¿—
                alice.print(std::cerr, "é»„æ°æ›¦æ˜¯è„‘æŠ½");
                
                //æƒ…å†µ3ï¼šè¾“å‡ºåˆ°æ–‡ä»¶
                std::ofstream file("data.txt");
                alice.print(file, "é»„æ°æ›¦æˆ‘ç”·ç¥")
            ```
    
    ---
    
    ### Now add manager
    ```c++
        class Manager : public Employee{
        public:
            Manager(const std::string& name, const std::string& ssn, const std::string& title);
            const std::string title_name() const;
            const std::string& get_title() const;
            void print(std::ostream& out) const;
        private:
            std::string m_title;
        };
    ```

