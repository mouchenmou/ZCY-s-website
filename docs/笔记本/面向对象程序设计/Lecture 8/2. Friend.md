
1. To explicitly grant access to a function that isn't a member of the structure.
    - 目的： 友元机制的根本目的是允许一个非成员函数或非成员类访问本类的私有和保护成员。
2. The class itself controls which code has access to its members.
    - 权限控制： 控制权在于类本身。
3. Can declare a global function as a friend, as well as a member function of another class, or even an entire class, as a friend.
---
## 如何在代码中实现friend
```c++
    #include<iostream>
    using namespace::std;
    
    class classA{
    private:
        int numA;
        friend class classB;
        
    public:
        classA():numA(12){}
    };
    
    class classB{
    private:
        int numB;
        friend class classB;
    public:
        classB():numB(1){}
        int add(){
            classA objectA;
            return objectA.numA+numB;
        }
    };
```
### 注意：
friend是单向的，如果在classA中声明了classB是它的friend；但是classB中未声明classA是它的friend。那么只有classB能访问classA中的内容，而classA不能访问classB中的内容。

---

## 示例二：
```c++
    #include<iostream>
    using namespace::std;

    class classA{
    private:
        int numA;

    public:
        classA():numA(12){}
        friend int addAB(classA, classB);

    };

    class classB{
    private:
        int numB;

    public:
        classB():numB(1){}
        friend int addAB(classA, classB);

    };

    int addAB(classA a, classB b){
        return a.numA+b.numB;
    }

    int main(){
        classA objectA;
        classB objectB;
        cout << "sum of A and B is " << addAB(objectA, objectB) << endl;
        return 0;
    }
```
### 警告：
这段代码是错误的，因为在`classA`中执行`addAB`时，`classB`对于编译器来说还是未知的，因此必须在此之前先声明`classB`。因此将代码调整为下面所示就没问题了。
```c++
    #include<iostream>
    using namespace::std;

    class classB;
    class classA{
    private:
        int numA;

    public:
        classA():numA(12){}
        friend int addAB(classA, classB);
    };

    class classB{
    private:
        int numB;
        
    public
        classB():numB(1){}
        friend int addAB(classA, classB);
    };

    int addAB(classA a, classB b){
        return a.numA+b.numB;
    }

    int main(){
        classA objectA;
        classB objectB;
        cout << "sum of A and B is " << addAB(objectA, objectB) << endl;
        return 0;
    }
```

---
## Virtual destructors
![](附件/Pasted%20image%2020251122034520.png)