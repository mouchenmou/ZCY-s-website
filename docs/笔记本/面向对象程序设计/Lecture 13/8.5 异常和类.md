## 8.5.1 异常类
![](附件/Pasted%20image%2020260107205624.png)
### 【例 8-9 】 设计一个堆栈，当入栈元素超出了堆栈容量时，就抛出一个栈满 的异常；如果栈已空还要从栈中弹出元素，就抛出一个栈空的异常。

```c++
    #include<iostream>
    using namespace std; 
    const int MAX=3; 
    class Full{}; //L1 堆栈满时抛出的异常类 
    class Empty{}; //L2 堆栈空时抛出的异常类 
    class Stack{ 
    private: 
        int s[MAX]; 
        int top; 
    public: 
        void push(int a); 
        int pop(); 
        Stack(){top=-1;} 
    };
    
    void Stack::push(int a){ 
        if(top>=MAX-1) throw Full(); 
        s[++top]=a; 
    } 
    int Stack::pop(){ 
        if(top<0) throw Empty(); 
        return s[top--]; 
    } 
    void main(){ 
        Stack s; 
        try{ 
            s.push(10);
            s.push(20); 
            s.push(30); 
            //s.push(40); //L5 将产生栈满异常 
            cout<<"stack(0)= "<<s.pop()<<endl;
            cout<<"stack(1)= "<<s.pop()<<endl;
            cout<<"stack(2)= "<<s.pop()<<endl;
            cout<<"stack(3)= "<<s.pop()<<endl; //L6
        }
        catch(Full){ 
            cout<<"Exception: Stack Full"<<endl; 
        }
        catch(Empty){ 
            cout<<"Exception: Stack Empty"<<endl; 
        }
}
```
![](附件/Pasted%20image%2020260107210739.png)

---

## 8.5.2 异常对象

![](附件/Pasted%20image%2020260107210830.png)
### 【例 8-10 】修改例 8-9 的 Full 异常类，添加构造函数、成员函数和一个数据成员。利用这些成员，可以获取异常发生时没有入栈的元素信息。

```c++
    #include <iostream>
    using namespace std;
    const int MAX=3;
    
    class Full{
    int a;
    public:
        Full(int i):a(i){}
        int getValue(){return a;}
    };
    
    class Empty{};
    
    class Stack{
    private:
        int s[MAX];
        int top;
    public:
        Stack(){top=-1;}
        void push(int a){
        if(top>=MAX-1) 
            throw Full(a);
        s[++top]=a;
        }
        int pop(){
        if(top<0)
            throw Empty();
        return s[top--];
        }
    };
    
    void main(){
        Stack s;
        try{
            s.push(10); 
            s.push(20);
            s.push(30); 
            s.push(40);
        }
        catch(Full e){
            cout<<"Exception: Stack Full..."<<endl;
            cout<<" The value not push in stack: "<< e.getValue() <<endl; 
        }
    }
```

![](附件/Pasted%20image%2020260107211617.png)
![](附件/Pasted%20image%2020260107212238.png)
![](附件/Pasted%20image%2020260107212720.png)

---

## 8.5.3 派生异常类的处理

![](附件/Pasted%20image%2020260107212438.png)
### 【例 8-11 】 设计图 8-3 所示异常继承体系中从BasicException 到 FileSysException 部分的异常类。
![](附件/Pasted%20image%2020260107212534.png)
![](附件/Pasted%20image%2020260107212554.png)

### 【 例 8-12 】 设 计 图 8-3 所 示 异 常 继 承 体 系 中 从 BasicException 到 FileSysException 部分的多态异常类。
![](附件/Pasted%20image%2020260107212638.png)
